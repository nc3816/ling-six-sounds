<!DOCTYPE html>
<html lang="en">
<head>
    <!-- 元数据和样式 -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ling Six Sound Check</title>
    <!-- 引入谷歌字体 -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <!-- 引入 Font Awesome 图标库 -->
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
          integrity="sha384-k6RqeWeci5ZR/Lv4MR0sA0FfDOM7zYl5eau8m/AI6qZ4P4p6"
          crossorigin="anonymous">
    <style>
        /* 全局样式 */
        body {
            font-family: 'Roboto', sans-serif;
            text-align: center;
            background-color: #121212; /* 深色背景 */
            color: #e0e0e0; /* 浅色文字 */
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            padding-top: 70px; /* 调整以适应固定导航栏 */
            min-height: 100vh;
        }
        /* 导航菜单样式 */
        nav {
            background-color: #1f1f1f; /* 导航栏深色背景 */
            width: 100%;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
            position: fixed;
            top: 0;
            left: 0;
            z-index: 1000;
        }
        .nav-menu {
            list-style: none;
            display: flex;
            justify-content: flex-end; /* 右侧对齐导航菜单 */
            margin: 0;
            padding: 0 20px;
        }
        .nav-item {
            padding: 15px 20px;
            cursor: pointer;
            color: #e0e0e0;
            font-weight: bold;
            transition: background 0.3s, color 0.3s;
            text-transform: uppercase;
            position: relative;
        }
        .nav-item::after {
            content: '';
            position: absolute;
            bottom: 10px;
            left: 50%;
            transform: translateX(-50%);
            width: 0%;
            height: 2px;
            background-color: #6200ea; /* 紫色下划线 */
            transition: width 0.3s;
        }
        .nav-item:hover::after {
            width: 100%;
        }
        .nav-item:hover {
            color: #bb86fc; /* 浅紫色 */
        }
        .nav-item.active {
            color: #bb86fc;
        }
        h1 {
            font-size: 2.5em;
            margin-top: 20px;
            margin-bottom: 20px;
            color: #bb86fc; /* 浅紫色标题 */
        }
        p {
            font-size: 1.2em;
            margin-bottom: 30px;
            color: #e0e0e0;
            line-height: 1.6;
        }
        .tab-content {
            width: 100%;
            max-width: 800px;
            padding: 20px;
            box-sizing: border-box;
        }
        .hidden {
            display: none;
        }
        /* 首页按钮样式 */
        .home-buttons {
            margin-top: 30px;
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
        }
        .home-button {
            margin: 10px;
            padding: 15px 50px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            border: 2px solid #6200ea;
            border-radius: 30px;
            background: transparent;
            color: #e0e0e0;
            transition: all 0.3s ease;
        }
        .home-button:hover {
            background: #6200ea;
            border-color: #bb86fc;
            color: #ffffff;
            box-shadow: 0 4px 6px rgba(98, 0, 234, 0.5);
            transform: translateY(-2px);
        }
        /* 按钮和选择器的通用样式 */
        .sound-button, select {
            background-color: #1f1f1f;
            color: #e0e0e0;
            border: 2px solid #6200ea;
            border-radius: 30px;
            padding: 15px 30px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 10px;
        }
        .sound-button:hover, select:hover {
            background-color: #6200ea;
            border-color: #bb86fc;
            color: #ffffff;
            box-shadow: 0 4px 6px rgba(98, 0, 234, 0.5);
            transform: translateY(-2px);
        }
        .sound-button:active {
            transform: translateY(1px);
        }
        /* 进度条样式 */
        #progressBar {
            width: 80%;
            height: 20px;
            background: #3c3c3c;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px auto;
        }
        #progress {
            height: 100%;
            background: linear-gradient(90deg, #6200ea, #bb86fc);
            width: 0;
        }
        /* 测试选项样式 */
        .test-options {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
        }
        /* 描述容器样式 */
        .description-container {
            max-width: 800px;
            margin: 0 auto;
            text-align: justify;
        }
        /* 响应式设计 */
        @media (max-width: 600px) {
            .nav-item {
                padding: 10px 15px;
            }
            .home-buttons {
                flex-direction: column;
            }
            .home-button {
                width: 80%;
                margin: 10px auto;
            }
        }
    </style>
</head>
<body>
    <!-- 导航菜单 -->
    <nav>
        <ul class="nav-menu">
            <li class="nav-item active" onclick="showTab('home')">Home</li>
            <li class="nav-item" onclick="showTab('practice')">Practice</li>
            <li class="nav-item" onclick="showTab('test')">Test</li>
        </ul>
    </nav>

    <h1>Ling Six Sound Check</h1>

    <!-- 首页 -->
    <div id="home" class="tab-content">
        <div id="description" class="description-container">
            <p>
                The Ling Six Sounds Check is a simple yet effective tool used to assess an individual's ability to hear and distinguish a range of speech frequencies essential for understanding spoken language. It involves six distinct sounds: "ah," "ee," "oo," "sh," "s," and "mm," which represent low to high frequencies of speech.
            </p>
            <p>
                Welcome to the Ling Six Sounds Check Online version! This interactive platform allows you to practice and test your hearing abilities conveniently from anywhere. We hope you enjoy using this tool and find it helpful in improving your auditory skills.
            </p>
            <p style="text-align: center; margin-top: 40px; font-size: 1.5em; color: #bb86fc;">
                Would you like to try?
            </p>
            <div class="home-buttons">
                <button class="home-button" onclick="showTab('practice')">Go to Practice</button>
                <button class="home-button" onclick="showTab('test')">Go to Test</button>
            </div>
        </div>
    </div>

    <!-- Practice 页面 -->
    <div id="practice" class="tab-content hidden">
        <p>Please select a practice mode:</p>
        <select id="practiceMode" onchange="changePracticeMode(this.value)">
            <option value="manual" selected>Manual Mode</option>
            <option value="loop">Loop Mode</option>
        </select>

        <div id="manualMode">
            <p>Click on each button to listen to a Ling Six Sound.</p>
            <button class="sound-button" onclick="playSound('ah')">Play "ah" <i class="fas fa-volume-up"></i></button>
            <button class="sound-button" onclick="playSound('ee')">Play "ee" <i class="fas fa-volume-up"></i></button>
            <button class="sound-button" onclick="playSound('oo')">Play "oo" <i class="fas fa-volume-up"></i></button>
            <button class="sound-button" onclick="playSound('sh')">Play "sh" <i class="fas fa-volume-up"></i></button>
            <button class="sound-button" onclick="playSound('s')">Play "s" <i class="fas fa-volume-up"></i></button>
            <button class="sound-button" onclick="playSound('mm')">Play "mm" <i class="fas fa-volume-up"></i></button>
        </div>

        <div id="loopMode" class="hidden">
            <p>The system will randomly play the six sounds. Please listen carefully.</p>
            <button class="sound-button" onclick="startLoop()">Start Loop Mode <i class="fas fa-play"></i></button>
            <button class="sound-button" onclick="stopLoop()">Stop Loop Mode <i class="fas fa-stop"></i></button>
            <div id="currentSound"></div>
        </div>
    </div>

    <!-- Test 页面 -->
    <div id="test" class="tab-content hidden">
        <p>Select the type of test:</p>
        <select id="testType" onchange="selectTestType(this.value)">
            <option value="" disabled selected>Select test type</option>
            <option value="multipleChoice">Multiple Choice</option>
            <option value="sameOrDifferent">Same or Different</option>
        </select>

        <div id="multipleChoiceTest" class="hidden">
            <div class="test-options">
                <div>
                    <p>Select the number of options for the test:</p>
                    <select id="optionCount">
                        <option value="2" selected>2 Options</option>
                        <option value="3">3 Options</option>
                        <option value="4">4 Options</option>
                        <option value="5">5 Options</option>
                        <option value="6">6 Options</option>
                    </select>
                </div>
                <div>
                    <p>Select the number of questions:</p>
                    <select id="questionCount">
                        <option value="10">10 Questions</option>
                        <option value="30">30 Questions</option>
                        <option value="50">50 Questions</option>
                    </select>
                </div>
            </div>
            <div style="margin-top: 20px;">
                <button class="sound-button" id="startTest" onclick="startTest()">Start Test <i class="fas fa-play"></i></button>
                <button class="sound-button hidden" id="exitTest" onclick="exitTest()" style="position: fixed; bottom: 20px; right: 20px;">Exit Test <i class="fas fa-stop"></i></button>
            </div>
            <div id="progressBar" class="hidden">
                <div id="progress"></div>
            </div>
            <div id="testButtons" style="margin-top: 20px;"></div>
            <div id="resultMessage" style="margin-top: 20px; font-size: 1.5em;"></div>
            <button id="nextButton" class="sound-button hidden" onclick="nextQuestion()">Next</button>
            <div id="finalResult" class="hidden" style="margin-top: 20px; font-size: 1.5em;"></div>
        </div>

        <div id="sameOrDifferentTest" class="hidden">
            <p>Same or Different Listening Practice:</p>
            <button class="sound-button" onclick="startSameOrDifferent()">Start Practice <i class="fas fa-play"></i></button>
            <div id="pairingMessage" class="hidden">Please listen carefully, now playing...</div>
            <div id="sameOrDifferentButtons" style="margin-top: 20px;"></div>
            <div id="sameOrDifferentResult" style="margin-top: 20px; font-size: 1.5em;"></div>
        </div>
    </div>

    <div id="playingMessage" class="hidden">Please listen carefully, now playing...</div>

    <script>
        // 声音列表
        const sounds = ['ah', 'ee', 'oo', 'sh', 's', 'mm'];
        let correctSound = '';
        let currentQuestion = 0;
        let totalQuestions = 0;
        let correctAnswers = 0;
        let incorrectCounts = { 'ah': 0, 'ee': 0, 'oo': 0, 'sh': 0, 's': 0, 'mm': 0 };
        let isLooping = false;

        function playSound(sound, callback) {
            const playingMessage = document.getElementById('playingMessage');
            playingMessage.classList.remove('hidden');
            const audio = new Audio(`sounds/${sound}.wav`);
            audio.play();
            audio.onended = () => {
                playingMessage.classList.add('hidden');
                if (callback) callback();
            };
        }

        function showTab(tabId) {
            document.querySelectorAll('.nav-item').forEach(item => item.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.add('hidden'));
            document.getElementById(tabId).classList.remove('hidden');
            document.querySelector(`.nav-item[onclick="showTab('${tabId}')"]`).classList.add('active');

            // 如果是 Home 页面，显示描述
            if (tabId === 'home') {
                document.getElementById('description').style.display = 'block';
            } else {
                document.getElementById('description').style.display = 'none';
            }
        }

        function changePracticeMode(value) {
            const manualMode = document.getElementById('manualMode');
            const loopMode = document.getElementById('loopMode');
            if (value === 'manual') {
                manualMode.classList.remove('hidden');
                loopMode.classList.add('hidden');
            } else if (value === 'loop') {
                manualMode.classList.add('hidden');
                loopMode.classList.remove('hidden');
            }
        }

        function startLoop() {
            if (isLooping) return;
            isLooping = true;
            loopSounds();
        }

        function stopLoop() {
            isLooping = false;
        }

        function loopSounds() {
            if (!isLooping) return;
            const randomSound = sounds[Math.floor(Math.random() * sounds.length)];
            playSound(randomSound, () => {
                if (isLooping) setTimeout(loopSounds, 2000);
            });
        }

        function selectTestType(testType) {
            document.getElementById('multipleChoiceTest').classList.add('hidden');
            document.getElementById('sameOrDifferentTest').classList.add('hidden');
            if (testType === 'multipleChoice') {
                document.getElementById('multipleChoiceTest').classList.remove('hidden');
            } else if (testType === 'sameOrDifferent') {
                document.getElementById('sameOrDifferentTest').classList.remove('hidden');
            }
        }

        function startTest() {
            const optionCount = parseInt(document.getElementById('optionCount').value);
            totalQuestions = parseInt(document.getElementById('questionCount').value);
            currentQuestion = 0;
            correctAnswers = 0;
            incorrectCounts = { 'ah': 0, 'ee': 0, 'oo': 0, 'sh': 0, 's': 0, 'mm': 0 };
            document.getElementById('progressBar').classList.remove('hidden');
            document.getElementById('finalResult').classList.add('hidden');
            document.getElementById('startTest').classList.add('hidden');
            document.getElementById('exitTest').classList.remove('hidden');
            nextQuestion();
        }

        function exitTest() {
            location.reload();
        }

        function nextQuestion() {
            if (currentQuestion >= totalQuestions) {
                showFinalResult();
                return;
            }
            currentQuestion++;
            document.getElementById('resultMessage').textContent = '';
            document.getElementById('nextButton').classList.add('hidden');
            updateProgress();
            generateQuestion();
        }

        function generateQuestion() {
            const optionCount = parseInt(document.getElementById('optionCount').value);
            const testButtons = document.getElementById('testButtons');
            testButtons.innerHTML = '';
            const shuffledSounds = sounds.sort(() => 0.5 - Math.random()).slice(0, optionCount);
            correctSound = shuffledSounds[Math.floor(Math.random() * shuffledSounds.length)];

            shuffledSounds.forEach(sound => {
                const button = document.createElement('button');
                button.className = 'sound-button';
                button.textContent = sound;
                button.onclick = () => checkAnswer(sound);
                testButtons.appendChild(button);
            });

            playSound(correctSound);
        }

        function checkAnswer(selectedSound) {
            const resultMessage = document.getElementById('resultMessage');
            if (selectedSound === correctSound) {
                resultMessage.textContent = 'Correct!';
                resultMessage.style.color = '#03dac5'; /* 绿色 */
                correctAnswers++;
            } else {
                resultMessage.textContent = `Incorrect. The correct answer was "${correctSound}".`;
                resultMessage.style.color = '#cf6679'; /* 红色 */
                incorrectCounts[correctSound]++;
            }
            document.getElementById('nextButton').classList.remove('hidden');
        }

        function updateProgress() {
            const progress = document.getElementById('progress');
            progress.style.width = `${(currentQuestion / totalQuestions) * 100}%`;
        }

        function showFinalResult() {
            const finalResult = document.getElementById('finalResult');
            finalResult.classList.remove('hidden');
            const mostIncorrect = Object.keys(incorrectCounts).reduce((a, b) => incorrectCounts[a] > incorrectCounts[b] ? a : b);
            finalResult.innerHTML = `
                Test completed!<br>
                Correct answers: ${correctAnswers}/${totalQuestions}<br>
                Most incorrect sound: "${mostIncorrect}" with ${incorrectCounts[mostIncorrect]} errors.
            `;
        }

        function startSameOrDifferent() {
            const soundPair = [sounds[Math.floor(Math.random() * sounds.length)], sounds[Math.floor(Math.random() * sounds.length)]];
            const pairingMessage = document.getElementById('pairingMessage');
            pairingMessage.classList.remove('hidden');
            pairingMessage.textContent = 'Playing first sound...';
            playSound(soundPair[0], () => {
                pairingMessage.textContent = 'Playing second sound...';
                playSound(soundPair[1], () => {
                    pairingMessage.classList.add('hidden');
                    const buttonsContainer = document.getElementById('sameOrDifferentButtons');
                    buttonsContainer.innerHTML = '';
                    const sameButton = document.createElement('button');
                    sameButton.className = 'sound-button';
                    sameButton.textContent = 'Same';
                    sameButton.onclick = () => checkSameOrDifferent(soundPair, true);
                    const differentButton = document.createElement('button');
                    differentButton.className = 'sound-button';
                    differentButton.textContent = 'Different';
                    differentButton.onclick = () => checkSameOrDifferent(soundPair, false);
                    buttonsContainer.appendChild(sameButton);
                    buttonsContainer.appendChild(differentButton);
                });
            });
        }

        function checkSameOrDifferent(soundPair, isSame) {
            const resultMessage = document.getElementById('sameOrDifferentResult');
            if ((soundPair[0] === soundPair[1] && isSame) || (soundPair[0] !== soundPair[1] && !isSame)) {
                resultMessage.textContent = 'Correct!';
                resultMessage.style.color = '#03dac5'; /* 绿色 */
            } else {
                resultMessage.textContent = 'Incorrect!';
                resultMessage.style.color = '#cf6679'; /* 红色 */
            }
        }

        // 页面加载时显示首页
        document.addEventListener('DOMContentLoaded', () => {
            showTab('home');
        });
    </script>
</body>
</html>
